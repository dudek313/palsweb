<template name="dataset">
<div class="row">
<div class="col-md-8">
<form role="form">
   <h1>Data Set: {{dataSet.name}}</h1>
   <div class="alert alert-danger error"></div>
   <div class="form-group">
       <label>Data Set Name</label>
       {{#if currentUser.admin}}
           <input class="modifier form-control" type="text" name="name" value="{{dataSet.name}}"></input>
       {{else}}
           <div class="display">{{dataSet.name}}</div>
       {{/if}}
   </div>
   <div class="form-group">
       {{#if currentUser.admin}}
       <label>Data Set Type</label>
       <select name="type" class="form-control trigger">
           <option value="n/a"></option>
           {{#each reference.dataSetType}}
           <option value='{{this}}' {{selected this dataSet.type}}>{{this}}</option>
           {{/each}}
       </select>
       {{else}}
       {{#if dataSet.type}}
           <label>Data Set Type</label>
           <div class="display">{{dataSet.type}}</div>
       {{/if}}
       {{/if}}
   </div>
   <div class="form-group">
       {{#if currentUser.admin}}
       <label>Spatial Resolution</label>
       <select name="spatialLevel" class="form-control trigger">
           {{#each reference.spatialLevel}}
           <option value='{{this}}' {{selected this dataSet.spatialLevel}}>{{this}}</option>
           {{/each}}
       </select>
       {{else}}
       {{#if dataSet.spatialLevel}}
           <label>Spatial Resolution</label>
           <div class="display">{{dataSet.spatialLevel}}</div>
       {{/if}}
       {{/if}}
   </div>
   <div class="form-group">
       {{#if currentUser.admin}}
       <label>Country</label>
       <select name="country" class="form-control trigger">
           <option value="n/a"></option>
           {{#each reference.country}}
           <option value='{{this}}' {{selected this dataSet.country}}>{{this}}</option>
           {{/each}}
       </select>
       {{else}}
       {{#if dataSet.country}}
           <label>Country</label>
           <div class="display">{{dataSet.country}}</div>
       {{/if}}
       {{/if}}
   </div>
   <div class="form-group">
       {{#if currentUser.admin}}
       <label>IGBP Vegetation Type</label>
       <select name="vegType" class="form-control trigger">
           <option value="n/a"></option>
           {{#each reference.vegType}}
           <option value='{{this}}' {{selected this dataSet.vegType}}>{{this}}</option>
           {{/each}}
       </select>
       {{else}}
       {{#if dataSet.vegType}}
           <label>IGBP Vegetation Type</label>
           <div class="display">{{dataSet.vegType}}</div>
       {{/if}}
       {{/if}}
   </div>
   {{#if currentUser.admin}}
   <div class="form-group">
       <label>or enter a different Vegetation Type</label>
       <input class="modifier form-control" type="text" name="vegType" value="{{#if dataSet.vegType}}{{dataSet.vegType}}{{/if}}"></input>
   </div>
   {{/if}}
   <div class="form-group">
       {{#if currentUser.admin}}
           <label>Soil Type</label>
           <input class="modifier form-control" type="text" name="soilType" value="{{dataSet.soilType}}"></input>
       {{else}}
           {{#if dataSet.soilType}}
               <label>Soil Type</label>
               <div class="display">{{dataSet.soilType}}</div>
           {{/if}}
       {{/if}}
   </div>
   <div class="form-group">
       {{#if currentUser.admin}}
           <label>Site Description URL</label>
           <input class="modifier form-control" type="url" name="url" value="{{dataSet.url}}"></input>
       {{else}}
       {{#if dataSet.url}}
           <label>Site Description URL</label>
           <div class="display">{{dataSet.url}}</div>    
       {{/if}}
       {{/if}}
   </div>
   <div class="form-group">
       {{#if currentUser.admin}}
           <label>Latitude (decimal)</label>
           <input class="modifier form-control" type="text" name="lat" value="{{dataSet.lat}}"></input>
       {{else}}
       {{#if dataSet.lat}}
           <label>Latitude (decimal)</label>
           <div class="display">{{dataSet.lat}}</div>
       {{/if}}
       {{/if}}
   </div>
   <div class="form-group">
       {{#if currentUser.admin}}
           <label>Longitude (decimal)</label>
           <input class="modifier form-control" type="text" name="lon" value="{{dataSet.lon}}"></input>
       {{else}}
       {{#if dataSet.lon}}
           <label>Longitude (decimal)</label>
           <div class="display">{{dataSet.lon}}</div>
       {{/if}}
       {{/if}}
   </div>
   <div class="form-group">
       {{#if currentUser.admin}}
           <label>Elevation (m)</label>
           <input class="modifier form-control" type="text" name="elevation" value="{{dataSet.elevation}}"></input>
       {{else}}
       {{#if dataSet.elevation}}
           <label>Elevation (m)</label>
           <div class="display">{{dataSet.elevation}}</div>
       {{/if}}
       {{/if}}
   </div>
   <div class="form-group">
       {{#if currentUser.admin}}
          <label>Max Vegetation Height (m)</label>
          <input class="modifier form-control" type="text" name="maxVegHeight" value="{{dataSet.maxVegHeight}}"></input>
       {{else}}
       {{#if dataSet.maxVegHeight}}
           <label>Max Vegetation Height (m)</label>
           <div class="display">{{dataSet.maxVegHeight}}</div>
       {{/if}}
       {{/if}}
   </div> 
   <div class="form-group">
       {{#if currentUser.admin}}
           <label>UTC Offset (hours)</label>
           <input class="modifier form-control" type="text" name="utcOffset" value="{{dataSet.utcOffset}}"></input>
       {{else}}
       {{#if dataSet.utcOffset}}
           <label>UTC Offset (hours)</label>
           <div class="display">{{dataSet.utcOffset}}</div>
       {{/if}}
       {{/if}}
   </div>
   <div class="form-group">
       {{#if currentUser.admin}}
           <label>Site Contact</label>
           <input class="modifier form-control" type="text" name="siteContact" value="{{dataSet.siteContact}}"></input>
       {{else}}
       {{#if dataSet.siteContact}}
           <label>Site Contact</label>
           <div class="display">{{dataSet.siteContact}}</div>
       {{/if}}
       {{/if}}
   </div>
   <div class="form-group">
       {{#if currentUser.admin}}
           <label>References</label>
           <textarea class="modifier form-control" type="text" name="references">{{dataSet.references}}</textarea>
       {{else}}
       {{#if dataSet.references}}
           <label>References</label>
           <div class="display">{{{breaklines dataSet.references}}}</div>
       {{/if}}
       {{/if}}
   </div>
   <div class="form-group">
       {{#if currentUser.admin}}
           <label>Comments</label>
           <textarea class="modifier form-control" type="text" name="comments">{{dataSet.comments}}</textarea>
       {{else}}
       {{#if dataSet.comments}}
           <label>Comments</label>
           <div class="display">{{{breaklines dataSet.comments}}}</div>
       {{/if}}
       {{/if}}
   </div>
   {{#if currentUser.admin}}
   <div class="form-group">
           <label>Variables</label>
           <select name="variable" class="form-control">
               {{#each variables}}
                   <option value='{{this._id}}'>{{this.name}}</option>
               {{/each}}
           </select>
   </div>
   <a class="btn btn-success add-variable">Add Variable</a>
   <h3>
   {{#each dataSet.variables}}
       <span class="label label-danger">{{this.name}} <a class="delete-button remove-variable" title="remove" id="{{this._id}}"><i class="fa fa-times-circle-o"></i></a></span>
   {{/each}}
   </h3>
   {{else}}
       <label>Variables</label>
       <h4>
       {{#each dataSet.variables}}
           <span class="label label-danger">{{this.name}}</span>
       {{/each}}
       </h4>
   {{/if}}
</form>
</div><!--left-column-->
<div class="col-md-4">
    <div class="panel panel-primary">
    <div class="panel-heading">Versions</div>
    <div class="panel-body">
    {{#if currentUser.admin}}
        <label>Upload a new version</label>
        <input type="file" class="file-select" name="file-select"/>
        <div class="progress progress-striped active">
          <div class="progress-bar"  role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"
              style="width:0%">
          </div>
        </div>
    {{/if}}
    </div>
    {{#if hasVersions}}
    <table class="table table-hover">
        <thead>
        <tr>
            <th>File</th>
            {{#if currentUser.admin}}<th>delete</th>{{/if}}
        </tr>
        </thead>
        <tbody>
        {{#each versions}}
        <tr>
            <td onclick="window.location.href='/file/{{key}}/{{encode 'application/x-netcdf'}}'">{{filename}}</td>
            {{#if currentUser.admin}}<td><button class='delete-version btn btn-danger btn-xs' id='{{key}}'>delete</button></td>{{/if}}
        </tr>
        {{/each}}
        </tbody>
    </table>
    {{/if}}
    </div>
</div>
</div><!--row-->
</template>