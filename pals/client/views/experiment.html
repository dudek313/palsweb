<template name="experiment">
<div class="experiment">
<div class="right-column">
    <h3>Driving Data Sets</h3>
    {{#if currentUser.admin}}
    <div class="form-item">
        <select name="drivingDataSet">
            {{#each dataSets}}
            <option value="{{_id}}">{{name}}</option>
            {{/each}}
        </select>
    </div>
    <button class='grey' id="driving-data-set">Add driving data set</button>
    {{/if}}
    <table>
        <tr>
            <th>Name</th>
            {{#if currentUser.admin}}<th>remove</th>{{/if}}
        </tr>
        {{#each drivingDataSets}}
        <tr>
            <td onclick="Meteor.Router.to('/datasets/{{_id}}')">{{name}}</td>
            {{#if currentUser.admin}}<td class='remove-driving-dataset' id='{{_id}}'>remove</td>{{/if}}
        </tr>
        {{/each}}
    </table>
    <br/>
    <h3>Input Data Sets</h3>
    {{#if currentUser.admin}}
    <div class="form-item">
        <select name="inputDataSet">
            {{#each dataSets}}
            <option value="{{_id}}">{{name}}</option>
            {{/each}}
        </select>
    </div>
    <button class='grey' id="input-data-set">Add input data set</button>
    {{/if}}
    <table>
        <tr>
            <th>Name</th>
            {{#if currentUser.admin}}<th>remove</th>{{/if}}
        </tr>
        {{#each inputDataSets}}
        <tr>
            <td onclick="Meteor.Router.to('/datasets/{{_id}}')">{{name}}</td>
            {{#if currentUser.admin}}<td class='remove-input-dataset' id='{{_id}}'>remove</td>{{/if}}
        </tr>
        {{/each}}
    </table>
</div><!--right-column-->
<div class="left-column">
    <h1>Experiment: {{experiment.name}}</h1>
    <div class="error"></div>
    <div class="form-item">
       <label>Experiment Name</label>
       <div class="display">{{experiment.name}}</div>
       {{#if currentUser.admin}}<input class="modifier" type="text" name="name" value="{{experiment.name}}"></input>{{/if}}
   </div>
   <div class="form-item">
       <label>Experiment Type</label>
       {{#if currentUser.admin}}
       <select name="type">
           {{#each reference.dataSetType}}
           <option value='{{this}}' {{selected this experiment.type}}>{{this}}</option>
           {{/each}}
       </select>
       {{else}}
       <div class="display">{{experiment.type}}</div>
       {{/if}}
   </div>
   <div class="form-item">
       <label>Country</label>
       {{#if currentUser.admin}}
       <select name="country">
           {{#each reference.country}}
           <option value='{{this}}' {{selected this experiment.country}}>{{this}}</option>
           {{/each}}
       </select>
       {{else}}
       <div class="display">{{dataSet.country}}</div>
       {{/if}}
   </div>
   <div class="form-item">
       <label>IGBP Vegetation Type</label>
       {{#if currentUser.admin}}
       <select name="vegType">
           {{#each reference.vegType}}
           <option value='{{this}}' {{selected this experiment.vegType}}>{{this}}</option>
           {{/each}}
       </select>
       {{else}}
       <div class="display">{{experiment.vegType}}</div>
       {{/if}}
   </div>
   {{#if currentUser.admin}}
   <div class="form-item">
       <label>or enter a different Vegetation Type</label>
       <div class="display">{{experiment.vegType}}</div>
       {{#if currentUser.admin}}<input class="modifier" type="text" name="vegType" value="{{experiment.vegType}}"></input>{{/if}}
   </div>
   {{/if}}
   <div class="form-item">
       <label>Spatial Level</label>
       {{#if currentUser.admin}}
       <select name="spatialLevel">
           {{#each reference.spatialLevel}}
           <option value='{{this}}' {{selected this experiment.spatialLevel}}>{{this}}</option>
           {{/each}}
       </select>
       {{else}}
       <div class="display">{{experiment.spatialLevel}}</div>
       {{/if}}
   </div>
   <div class="form-item">
       <label>Time Step Size</label>
       {{#if currentUser.admin}}
       <select name="timeStepSize">
           {{#each reference.timeStepSize}}
           <option value='{{this}}' {{selected this experiment.timeSetSize}}>{{this}}</option>
           {{/each}}
       </select>
       {{else}}
       <div class="display">{{experiment.timeStepSize}}</div>
       {{/if}}
   </div>
</div><!--left-column-->
</div><!--experiment-->
</template>